<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:controls="using:Miscord.Client.Controls"
             mc:Ignorable="d"
             x:Class="Miscord.Client.Controls.AudioDeviceContent"
             x:DataType="controls:AudioDeviceContent">

    <Border Background="#2f3136"
            CornerRadius="8"
            Padding="12"
            BorderBrush="#202225"
            BorderThickness="1"
            Width="280">
        <StackPanel Spacing="12">
            <!-- Header -->
            <TextBlock Text="AUDIO DEVICES"
                       FontSize="12"
                       FontWeight="SemiBold"
                       Foreground="#72767d"/>

            <!-- Input Device -->
            <StackPanel Spacing="4">
                <TextBlock Text="Input Device"
                           FontSize="12"
                           Foreground="#b9bbbe"/>
                <ComboBox ItemsSource="{Binding InputDevices, RelativeSource={RelativeSource AncestorType=controls:AudioDeviceContent}}"
                          SelectedItem="{Binding SelectedInputDeviceItem, RelativeSource={RelativeSource AncestorType=controls:AudioDeviceContent}, Mode=TwoWay}"
                          DisplayMemberBinding="{Binding DisplayName}"
                          Background="#40444b"
                          Foreground="White"
                          HorizontalAlignment="Stretch"/>
                <!-- Input Level Meter -->
                <StackPanel Margin="0,4,0,0" Spacing="2">
                    <ProgressBar Minimum="0"
                                 Maximum="1"
                                 Value="{Binding InputLevel, RelativeSource={RelativeSource AncestorType=controls:AudioDeviceContent}}"
                                 Height="6"
                                 Background="#40444b"
                                 Foreground="#43b581"
                                 CornerRadius="3"/>
                    <TextBlock Text="Speak to test microphone"
                               FontSize="10"
                               Foreground="#72767d"
                               HorizontalAlignment="Center"/>
                </StackPanel>
            </StackPanel>

            <!-- Output Device -->
            <StackPanel Spacing="4">
                <TextBlock Text="Output Device"
                           FontSize="12"
                           Foreground="#b9bbbe"/>
                <ComboBox ItemsSource="{Binding OutputDevices, RelativeSource={RelativeSource AncestorType=controls:AudioDeviceContent}}"
                          SelectedItem="{Binding SelectedOutputDeviceItem, RelativeSource={RelativeSource AncestorType=controls:AudioDeviceContent}, Mode=TwoWay}"
                          DisplayMemberBinding="{Binding DisplayName}"
                          Background="#40444b"
                          Foreground="White"
                          HorizontalAlignment="Stretch"/>
            </StackPanel>

            <!-- Voice Mode -->
            <StackPanel Spacing="4">
                <TextBlock Text="Voice Mode"
                           FontSize="12"
                           Foreground="#b9bbbe"/>
                <CheckBox IsChecked="{Binding PushToTalkEnabled, RelativeSource={RelativeSource AncestorType=controls:AudioDeviceContent}, Mode=TwoWay}"
                          Foreground="#dcddde">
                    <TextBlock Text="Push-to-talk (hold Space to talk)"
                               FontSize="12"/>
                </CheckBox>
                <TextBlock Text="{Binding VoiceModeDescription, RelativeSource={RelativeSource AncestorType=controls:AudioDeviceContent}}"
                           FontSize="10"
                           Foreground="#72767d"
                           TextWrapping="Wrap"/>
            </StackPanel>

            <!-- Refresh Button -->
            <Button Content="Refresh Devices"
                    HorizontalAlignment="Stretch"
                    Background="#5865f2"
                    Foreground="White"
                    Padding="8,6"
                    CornerRadius="4"
                    Cursor="Hand"
                    Click="OnRefreshClick"/>
        </StackPanel>
    </Border>
</UserControl>
