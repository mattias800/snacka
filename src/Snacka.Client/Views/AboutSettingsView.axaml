<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:Snacka.Client.ViewModels"
             xmlns:ui="using:FluentAvalonia.UI.Controls"
             x:Class="Snacka.Client.Views.AboutSettingsView"
             x:DataType="vm:AboutSettingsViewModel">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Spacing="24" MaxWidth="600">
            <!-- Header -->
            <StackPanel Spacing="8">
                <TextBlock Text="About Snacka"
                           FontSize="24"
                           FontWeight="SemiBold"
                           Foreground="{StaticResource ForegroundBrush}"/>
                <TextBlock Text="Build and system information"
                           FontSize="14"
                           Foreground="{StaticResource Foreground3Brush}"/>
            </StackPanel>

            <!-- Version Info Card -->
            <Border Background="{StaticResource Content1Brush}"
                    CornerRadius="12"
                    Padding="20">
                <StackPanel Spacing="16">
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <Border Width="48" Height="48" CornerRadius="10" Background="{StaticResource PrimaryGradient}">
                            <ui:SymbolIcon Symbol="Home" FontSize="24" Foreground="White"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <StackPanel VerticalAlignment="Center">
                            <TextBlock Text="Snacka"
                                       FontSize="18"
                                       FontWeight="SemiBold"
                                       Foreground="{StaticResource ForegroundBrush}"/>
                            <TextBlock Text="{Binding Version, StringFormat='Version {0}'}"
                                       FontSize="14"
                                       Foreground="{StaticResource Foreground2Brush}"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Update Status Section -->
                    <StackPanel Spacing="12">
                        <!-- Checking for updates indicator -->
                        <StackPanel Orientation="Horizontal" Spacing="8"
                                    IsVisible="{Binding IsCheckingForUpdate}">
                            <ui:ProgressRing Width="16" Height="16" IsIndeterminate="True"/>
                            <TextBlock Text="Checking for updates..."
                                       FontSize="13"
                                       Foreground="{StaticResource Foreground2Brush}"
                                       VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- Update available notification -->
                        <Border Background="#2d5865f2"
                                CornerRadius="8"
                                Padding="12"
                                IsVisible="{Binding HasAvailableUpdate}">
                            <Grid ColumnDefinitions="*,Auto">
                                <StackPanel Grid.Column="0" Spacing="4">
                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                        <ui:SymbolIcon Symbol="Important" FontSize="16" Foreground="#5865F2"/>
                                        <TextBlock FontSize="13" Foreground="{StaticResource ForegroundBrush}">
                                            <Run Text="Update available:"/>
                                            <Run Text="{Binding AvailableUpdate.Version}" FontWeight="Bold"/>
                                        </TextBlock>
                                    </StackPanel>
                                    <TextBlock Text="A new version is available on GitHub."
                                               FontSize="12"
                                               Foreground="{StaticResource Foreground3Brush}"/>
                                </StackPanel>
                                <Button Grid.Column="1"
                                        Command="{Binding OpenReleasesPageCommand}"
                                        Classes="btn-primary"
                                        Padding="12,8"
                                        VerticalAlignment="Center">
                                    <StackPanel Orientation="Horizontal" Spacing="6">
                                        <ui:SymbolIcon Symbol="Link" FontSize="12"/>
                                        <TextBlock Text="View on GitHub" FontSize="12"/>
                                    </StackPanel>
                                </Button>
                            </Grid>
                        </Border>

                        <!-- Up to date message -->
                        <TextBlock Text="{Binding UpdateCheckStatus}"
                                   FontSize="13"
                                   Foreground="{StaticResource SuccessBrush}"
                                   IsVisible="{Binding UpdateCheckStatus, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>

                        <!-- Check for updates button (shown when not checking and no update available) -->
                        <Button Command="{Binding CheckForUpdateCommand}"
                                Classes="btn-secondary"
                                Padding="12,8"
                                IsVisible="{Binding !IsCheckingForUpdate}">
                            <StackPanel Orientation="Horizontal" Spacing="6">
                                <ui:SymbolIcon Symbol="Sync" FontSize="14"/>
                                <TextBlock Text="Check for Updates"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Build Information -->
            <Border Background="{StaticResource Content1Brush}"
                    CornerRadius="12"
                    Padding="20">
                <StackPanel Spacing="16">
                    <TextBlock Text="Build Information"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource ForegroundBrush}"/>

                    <Grid RowDefinitions="Auto,Auto,Auto,Auto" ColumnDefinitions="150,*">
                        <!-- Version -->
                        <TextBlock Grid.Row="0" Grid.Column="0"
                                   Text="Version"
                                   FontSize="13"
                                   Foreground="{StaticResource Foreground3Brush}"
                                   Margin="0,0,0,8"/>
                        <TextBlock Grid.Row="0" Grid.Column="1"
                                   Text="{Binding FullVersion}"
                                   FontSize="13"
                                   Foreground="{StaticResource ForegroundBrush}"
                                   Margin="0,0,0,8"/>

                        <!-- .NET Version -->
                        <TextBlock Grid.Row="1" Grid.Column="0"
                                   Text=".NET Runtime"
                                   FontSize="13"
                                   Foreground="{StaticResource Foreground3Brush}"
                                   Margin="0,0,0,8"/>
                        <TextBlock Grid.Row="1" Grid.Column="1"
                                   Text="{Binding DotNetVersion}"
                                   FontSize="13"
                                   Foreground="{StaticResource ForegroundBrush}"
                                   TextWrapping="Wrap"
                                   Margin="0,0,0,8"/>

                        <!-- Runtime Identifier -->
                        <TextBlock Grid.Row="2" Grid.Column="0"
                                   Text="Runtime ID"
                                   FontSize="13"
                                   Foreground="{StaticResource Foreground3Brush}"
                                   Margin="0,0,0,8"/>
                        <TextBlock Grid.Row="2" Grid.Column="1"
                                   Text="{Binding RuntimeIdentifier}"
                                   FontSize="13"
                                   Foreground="{StaticResource ForegroundBrush}"
                                   Margin="0,0,0,8"/>

                        <!-- Architecture -->
                        <TextBlock Grid.Row="3" Grid.Column="0"
                                   Text="Architecture"
                                   FontSize="13"
                                   Foreground="{StaticResource Foreground3Brush}"/>
                        <TextBlock Grid.Row="3" Grid.Column="1"
                                   Text="{Binding Architecture}"
                                   FontSize="13"
                                   Foreground="{StaticResource ForegroundBrush}"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- System Information -->
            <Border Background="{StaticResource Content1Brush}"
                    CornerRadius="12"
                    Padding="20">
                <StackPanel Spacing="16">
                    <TextBlock Text="System Information"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource ForegroundBrush}"/>

                    <Grid RowDefinitions="Auto" ColumnDefinitions="150,*">
                        <!-- Operating System -->
                        <TextBlock Grid.Row="0" Grid.Column="0"
                                   Text="Operating System"
                                   FontSize="13"
                                   Foreground="{StaticResource Foreground3Brush}"/>
                        <TextBlock Grid.Row="0" Grid.Column="1"
                                   Text="{Binding OperatingSystem}"
                                   FontSize="13"
                                   Foreground="{StaticResource ForegroundBrush}"
                                   TextWrapping="Wrap"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Diagnostics / Bug Reporting -->
            <Border Background="{StaticResource Content1Brush}"
                    CornerRadius="12"
                    Padding="20">
                <StackPanel Spacing="16">
                    <StackPanel Spacing="4">
                        <TextBlock Text="Diagnostics"
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource ForegroundBrush}"/>
                        <TextBlock Text="Logs to help with bug reports"
                                   FontSize="12"
                                   Foreground="{StaticResource Foreground3Brush}"/>
                    </StackPanel>

                    <!-- Log file path -->
                    <StackPanel Spacing="4">
                        <TextBlock Text="Log File"
                                   FontSize="12"
                                   Foreground="{StaticResource Foreground3Brush}"/>
                        <TextBlock Text="{Binding LogFilePath}"
                                   FontSize="11"
                                   Foreground="{StaticResource Foreground2Brush}"
                                   TextWrapping="Wrap"
                                   FontFamily="Consolas, Monaco, monospace"/>
                    </StackPanel>

                    <!-- Action buttons -->
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <Button Command="{Binding CopyLogsCommand}"
                                Classes="btn-primary"
                                Padding="16,10">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <ui:SymbolIcon Symbol="Copy" FontSize="14"/>
                                <TextBlock Text="Copy Logs for Bug Report"/>
                            </StackPanel>
                        </Button>

                        <Button Command="{Binding OpenLogsFolderCommand}"
                                Classes="btn-secondary"
                                Padding="16,10">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <ui:SymbolIcon Symbol="OpenFolder" FontSize="14"/>
                                <TextBlock Text="Open Logs Folder"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>

                    <!-- Status message -->
                    <TextBlock Text="{Binding CopyStatus}"
                               FontSize="12"
                               Foreground="{StaticResource SuccessBrush}"
                               IsVisible="{Binding CopyStatus, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>

                    <!-- Instructions -->
                    <Border Background="{StaticResource Content2Brush}"
                            CornerRadius="8"
                            Padding="12">
                        <TextBlock Text="When reporting a bug, click 'Copy Logs for Bug Report' to copy diagnostic information to your clipboard. Then paste it in your bug report on GitHub."
                                   FontSize="12"
                                   Foreground="{StaticResource Foreground3Brush}"
                                   TextWrapping="Wrap"/>
                    </Border>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>
