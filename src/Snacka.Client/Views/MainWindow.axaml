<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Snacka.Client.ViewModels"
        xmlns:views="using:Snacka.Client.Views"
        x:Class="Snacka.Client.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="Snacka"
        Icon="/Assets/snacka-icon.png"
        Width="1200"
        Height="800"
        MinWidth="800"
        MinHeight="600"
        Background="#202225">

    <Window.DataTemplates>
        <DataTemplate DataType="{x:Type vm:LoadingViewModel}">
            <views:LoadingView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:ServerConnectionViewModel}">
            <views:ServerConnectionView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:LoginViewModel}">
            <views:LoginView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:RegisterViewModel}">
            <views:RegisterView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:MainAppViewModel}">
            <views:MainAppView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:DirectMessagesViewModel}">
            <views:DirectMessagesView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:SettingsViewModel}">
            <views:SettingsView/>
        </DataTemplate>
    </Window.DataTemplates>

    <Grid RowDefinitions="Auto,*">
        <!-- Update Banner -->
        <Border Grid.Row="0"
                Background="#5865F2"
                Padding="12,8"
                IsVisible="{Binding ShowUpdateBanner}">
            <Grid ColumnDefinitions="*,Auto,Auto">
                <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                    <TextBlock Text="&#x2728;" FontSize="16"/>
                    <TextBlock VerticalAlignment="Center" Foreground="White">
                        <Run Text="A new version is available:"/>
                        <Run Text="{Binding UpdateInfo.Version}" FontWeight="Bold"/>
                        <Run Text="(you have"/>
                        <Run Text="{Binding CurrentVersion}"/>
                        <Run Text=")"/>
                    </TextBlock>
                </StackPanel>
                <Button Grid.Column="1"
                        Content="Download"
                        Command="{Binding OpenUpdatePage}"
                        Background="#4752C4"
                        Foreground="White"
                        Padding="16,6"
                        Margin="8,0"
                        CornerRadius="4"/>
                <Button Grid.Column="2"
                        Content="&#x2715;"
                        Command="{Binding DismissUpdateBanner}"
                        Background="Transparent"
                        Foreground="White"
                        Padding="8,4"
                        FontSize="14"/>
            </Grid>
        </Border>

        <!-- Main Content -->
        <ContentControl Grid.Row="1" Content="{Binding CurrentView}"/>
    </Grid>
</Window>
