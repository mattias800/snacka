<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:Snacka.Client.ViewModels"
             xmlns:ui="using:FluentAvalonia.UI.Controls"
             x:Class="Snacka.Client.Views.RegisterView"
             x:DataType="vm:RegisterViewModel"
             x:CompileBindings="False">

    <!-- Beautiful gradient background -->
    <Border>
        <Border.Background>
            <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                <GradientStop Color="#09090b" Offset="0"/>
                <GradientStop Color="#0c1929" Offset="0.5"/>
                <GradientStop Color="#09090b" Offset="1"/>
            </LinearGradientBrush>
        </Border.Background>

        <Grid>
            <!-- Subtle decorative gradient orbs -->
            <Ellipse Width="600" Height="600"
                     HorizontalAlignment="Left"
                     VerticalAlignment="Top"
                     Margin="-200,-200,0,0"
                     Opacity="0.15">
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#22c55e" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
            </Ellipse>

            <Ellipse Width="500" Height="500"
                     HorizontalAlignment="Right"
                     VerticalAlignment="Bottom"
                     Margin="0,0,-150,-150"
                     Opacity="0.1">
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#006FEE" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
            </Ellipse>

            <!-- Scrollable content for smaller screens -->
            <ScrollViewer HorizontalScrollBarVisibility="Disabled"
                          VerticalScrollBarVisibility="Auto">
                <Border HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Background="#E618181b"
                        CornerRadius="24"
                        Padding="48,36"
                        Margin="20,40"
                        MinWidth="440"
                        MaxWidth="480"
                        BoxShadow="0 25 50 -12 #40000000">

                    <StackPanel Spacing="20">
                        <!-- Welcome header -->
                        <StackPanel HorizontalAlignment="Center" Spacing="12">
                            <Border Width="64" Height="64"
                                    CornerRadius="18"
                                    HorizontalAlignment="Center">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                        <GradientStop Color="#4ade80" Offset="0"/>
                                        <GradientStop Color="#22c55e" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <ui:SymbolIcon Symbol="Add"
                                           Foreground="White"
                                           FontSize="28"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"/>
                            </Border>

                            <StackPanel Spacing="6">
                                <TextBlock Text="Create your account"
                                           FontSize="26"
                                           FontWeight="Bold"
                                           Foreground="#fafafa"
                                           HorizontalAlignment="Center"/>
                                <TextBlock Text="Join the conversation"
                                           FontSize="14"
                                           Foreground="#71717a"
                                           HorizontalAlignment="Center"/>
                            </StackPanel>
                        </StackPanel>

                        <!-- Username Input -->
                        <StackPanel Spacing="8">
                            <TextBlock Text="USERNAME"
                                       FontSize="11"
                                       FontWeight="SemiBold"
                                       Foreground="#71717a"/>
                            <TextBox Text="{Binding Username}"
                                     Watermark="Choose a username"
                                     Classes="input-default"/>
                        </StackPanel>

                        <!-- Email Input -->
                        <StackPanel Spacing="8">
                            <TextBlock Text="EMAIL"
                                       FontSize="11"
                                       FontWeight="SemiBold"
                                       Foreground="#71717a"/>
                            <TextBox Text="{Binding Email}"
                                     Watermark="you@example.com"
                                     Classes="input-default"/>
                        </StackPanel>

                        <!-- Password Input -->
                        <StackPanel Spacing="8">
                            <TextBlock Text="PASSWORD"
                                       FontSize="11"
                                       FontWeight="SemiBold"
                                       Foreground="#71717a"/>
                            <TextBox Text="{Binding Password}"
                                     PasswordChar="*"
                                     Watermark="Create a strong password"
                                     Classes="input-default"/>
                        </StackPanel>

                        <!-- Confirm Password Input -->
                        <StackPanel Spacing="8">
                            <TextBlock Text="CONFIRM PASSWORD"
                                       FontSize="11"
                                       FontWeight="SemiBold"
                                       Foreground="#71717a"/>
                            <TextBox Text="{Binding ConfirmPassword}"
                                     PasswordChar="*"
                                     Watermark="Confirm your password"
                                     Classes="input-default"/>
                        </StackPanel>

                        <!-- Invite Code Input -->
                        <StackPanel Spacing="8">
                            <TextBlock Text="INVITE CODE"
                                       FontSize="11"
                                       FontWeight="SemiBold"
                                       Foreground="#71717a"/>
                            <TextBox Text="{Binding InviteCode}"
                                     Watermark="Enter your invite code"
                                     Classes="input-default"/>
                        </StackPanel>

                        <!-- Error Message -->
                        <Border Background="#1aef4444"
                                CornerRadius="12"
                                Padding="16,12"
                                IsVisible="{Binding ErrorMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                            <StackPanel Orientation="Horizontal" Spacing="10">
                                <ui:SymbolIcon Symbol="Important"
                                           Foreground="#ef4444"
                                           FontSize="16"
                                           VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding ErrorMessage}"
                                           Foreground="#fca5a5"
                                           FontSize="13"
                                           TextWrapping="Wrap"
                                           VerticalAlignment="Center"/>
                            </StackPanel>
                        </Border>

                        <!-- Register Button -->
                        <Button Command="{Binding RegisterCommand}"
                                HorizontalAlignment="Stretch"
                                HorizontalContentAlignment="Center"
                                Padding="16,14"
                                CornerRadius="12"
                                FontWeight="SemiBold"
                                IsEnabled="{Binding !IsLoading}">
                            <Button.Background>
                                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                    <GradientStop Color="#4ade80" Offset="0"/>
                                    <GradientStop Color="#22c55e" Offset="1"/>
                                </LinearGradientBrush>
                            </Button.Background>
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <ui:SymbolIcon Symbol="Checkmark"
                                           Foreground="White"
                                           FontSize="16"
                                           VerticalAlignment="Center"
                                           IsVisible="{Binding !IsLoading}"/>
                                <TextBlock Text="Create Account"
                                           Foreground="White"
                                           FontSize="15"
                                           FontWeight="SemiBold"
                                           VerticalAlignment="Center"
                                           IsVisible="{Binding !IsLoading}"/>
                                <TextBlock Text="Creating account..."
                                           Foreground="White"
                                           FontSize="15"
                                           FontWeight="SemiBold"
                                           VerticalAlignment="Center"
                                           IsVisible="{Binding IsLoading}"/>
                            </StackPanel>
                        </Button>

                        <!-- Login Link -->
                        <Border Background="#18181b"
                                CornerRadius="12"
                                Padding="16,14">
                            <StackPanel Orientation="Horizontal"
                                        HorizontalAlignment="Center"
                                        Spacing="6">
                                <TextBlock Text="Already have an account?"
                                           Foreground="#71717a"
                                           FontSize="14"
                                           VerticalAlignment="Center"/>
                                <Button Command="{Binding SwitchToLoginCommand}"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        Padding="4,0"
                                        Cursor="Hand">
                                    <TextBlock Text="Sign in"
                                               FontSize="14"
                                               FontWeight="SemiBold"
                                               VerticalAlignment="Center">
                                        <TextBlock.Foreground>
                                            <LinearGradientBrush StartPoint="0%,50%" EndPoint="100%,50%">
                                                <GradientStop Color="#338ef7" Offset="0"/>
                                                <GradientStop Color="#006FEE" Offset="1"/>
                                            </LinearGradientBrush>
                                        </TextBlock.Foreground>
                                    </TextBlock>
                                </Button>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Border>
            </ScrollViewer>
        </Grid>
    </Border>
</UserControl>
